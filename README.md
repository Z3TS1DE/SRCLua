
# Lua API Documentation

## Функции

### `print(message)`

Выводит текст `message` в консоль.

**Пример:**

```lua
print("Hello world!")
```

---

### `setCVar(convar, value)`

Назначает `convar` со значением `value` без каких-либо ограничений.

**Пример:**

```lua
setCVar("sv_cheats", "1")
print("Server cvar \"sv_cheats\" changed to 1")
```

---

### `getCVar(convar)`

Получает значение у `convar`.

**Пример:**

```lua
local sv_cheats = getCVar("sv_cheats")
print("sv_cheats = " .. sv_cheats)
```

---

### `cmd(command)`

Выполняет команду в игровую консоль.

**Пример:**

```lua
cmd("say Hello world!")
cmd("name MyName")
```

---

### `wait(ms)`

Делает задержку на `ms` миллисекунд.

**Пример:**

```lua
print("Ожидание...")
wait(1000) -- 1000 мс = 1 секунда
print("Прошло 1 сек!")
```

---

### `isactive()`

Возвращает `true`, если клиент полностью подключен к серверу.

**Пример:**

```lua
-- Пример использования отсутствует
```

---

### `isconnected()`

Возвращает `true`, если клиент подключен к серверу, но всё ещё загружается.

**Пример:**

```lua
local ip = "127.0.0.1"
cmd("connect " .. ip)
while not isconnected() do
    wait(300)
end
print("Подключение найдено!")
```

---

### `ConVar(convar_name, default_value, flags, description)`

Регистрирует консольное значение.

- `convar_name` - название
- `default_value` - значение по умолчанию
- `flags` - флаги (см. ниже)
- `description` - описание

**Пример:**

```lua
ConVar("my_cvar", "1", FCVAR_NOTIFY, "The Description.")
print(getCVar("my_cvar"))
```

**Все флаги:**

| Флаг                           | Описание                                                                                         |
|--------------------------------|--------------------------------------------------------------------------------------------------|
| `FCVAR_UNREGISTERED`           | Команда не зарегистрирована и не имеет стандартного поведения в системе команд.                 |
| `FCVAR_DEVELOPMENTONLY`        | Команда доступна только в режиме разработки.                                                     |
| `FCVAR_GAMEDLL`                | Команда используется только в игровых DLL.                                                        |
| `FCVAR_CLIENTDLL`              | Команда предназначена для использования только в клиентской DLL.                                 |
| `FCVAR_HIDDEN`                 | Команда скрыта от списка доступных команд.                                                        |
| `FCVAR_PROTECTED`              | Команда защищена от изменения стандартными методами.                                              |
| `FCVAR_SPONLY`                 | Команда доступна только в однопользовательском режиме.                                            |
| `FCVAR_ARCHIVE`                | Команда сохраняется в конфигурационном файле и восстанавливается при следующем запуске игры.     |
| `FCVAR_NOTIFY`                 | При изменении команды будет отправлено уведомление.                                              |
| `FCVAR_USERINFO`              | Команда используется для хранения информации о пользователе.                                      |
| `FCVAR_PRINTABLEONLY`          | Значение команды может содержать только печатные символы.                                         |
| `FCVAR_UNLOGGED`               | Команда не будет записана в логи.                                                                 |
| `FCVAR_NEVER_AS_STRING`        | Значение команды никогда не должно быть интерпретировано как строка.                             |
| `FCVAR_REPLICATED`             | Значение команды синхронизируется между клиентом и сервером.                                     |
| `FCVAR_CHEAT`                  | Команда доступна только в режиме читов.                                                           |
| `FCVAR_DEMO`                   | Команда используется в демо-записях.                                                               |
| `FCVAR_DONTRECORD`             | Команда не будет записана в демо или лог файлы.                                                  |
| `FCVAR_RELOAD_MATERIALS`       | Команда требует перезагрузки материалов после изменения.                                          |
| `FCVAR_RELOAD_TEXTURES`        | Команда требует перезагрузки текстур после изменения.                                             |
| `FCVAR_NOT_CONNECTED`          | Команда доступна даже если клиент не подключен к серверу.                                        |
| `FCVAR_MATERIAL_SYSTEM_THREAD` | Команда используется в потоке системы материалов.                                                |
| `FCVAR_ARCHIVE_XBOX`           | Команда сохраняется в конфигурационном файле на Xbox.                                             |
| `FCVAR_ACCESSIBLE_FROM_THREADS`| Команда доступна из потоков.                                                                      |
| `FCVAR_SERVER_CAN_EXECUTE`     | Команда может быть выполнена на сервере.                                                          |
| `FCVAR_SERVER_CANNOT_QUERY`    | Команда не может быть запрошена с сервера.                                                       |
| `FCVAR_CLIENTCMD_CAN_EXECUTE`  | Команда может быть выполнена клиентом.                                                            |

---

### `getAng()`

Возвращает 3 значения углов клиента (`pitch`, `yaw`, `roll`).

**Пример:**

```lua
local pitch, yaw, roll = getAng()
print("My Pitch: " .. pitch)
print("My Yaw: " .. yaw)
print("My Roll: " .. roll)
```

---

### `setAng(pitch, yaw, roll)`

Устанавливает взгляд угла игрока. `roll` необязателен. `Pitch` - вертикальный поворот, `Yaw` - горизонтальный поворот, `Roll` - наклон камеры продольной оси.

**Пример:**

```lua
for i = 1, 36 do -- Поворот камеры на 360 градусов
    local pitch, yaw, roll = getAng()
    setAng(pitch, yaw + 10, roll)
    wait(10)
end
```

---

### `createthread(func)`

Создаёт новый поток выполнения для указанной функции `func`, позволя

я её выполнение в фоновом режиме без прерывания основного потока исполнения.

**Пример:**

```lua
createthread(function()
    for i = 1, 3 do
        print("First Thread: " .. i)
        wait(1000)
    end
end)
wait(50)
for i = 1, 3 do
    print("Second Thread: " .. i)
    wait(1000)
end
```

---

### `GetModule(dllname)`

Получает базовый адрес определённого DLL.

**Пример:**

```lua
local engine = GetModule("engine.dll")
```

---

### `memoryread(address, mode, length)`

Читает указанный адрес с определённым режимом.

- **Режимы:**
  - `int` - Читает целое число.
  - `float` - Читает число с плавающей точкой (одинарной точности).
  - `double` - Читает число с плавающей точкой (двойной точности).
  - `string` - Читает текстовую строку. В этом режиме требуется третий параметр `length`, который указывает длину строки.

**Пример:**

```lua
local engine = GetModule("engine.dll")

local offset_currentmap = 0x51FAD0

if isconnected() then
    local currentmap = memoryread(engine + offset_currentmap, "string", 260)
    print("Текущая карта: " .. currentmap)
else
    print("Вы находитесь в главном меню!")
end
```

---

### `memorywrite(address, mode, value, length)`

Записывает значение в указанный адрес с определённым режимом.

- **Режимы:**
  - `int` - Записывает целое число.
  - `float` - Записывает число с плавающей точкой (одинарной точности).
  - `double` - Записывает число с плавающей точкой (двойной точности).
  - `string` - Записывает текстовую строку. В этом режиме требуется третий параметр `length`, который указывает длину строки.

**Пример:**

```lua
-- Пример использования отсутствует
```

---

### `getPos()`

Возвращает три значения координат игрока (`x`, `y`, `z`).

**Пример:**

```lua
local x, y, z = getPos()
print("x = " .. x)
print("y = " .. y)
print("z = " .. z)
```

---

### `maxclients()`

Возвращает максимальное количество слотов (игроков) на сервере.

**Пример:**

```lua
-- Пример использования отсутствует
```

---

### `GetPlayerInfo(index)`

Получает информацию об игроке по его индексу. Возвращает таблицу с такими значениями:

- `name` - Никнейм игрока
- `userID` - Идентификатор игрока
- `guid` - Проще говоря SteamID
- `fakeplayer` - Является ли игрок ботом или нет
- `ishltv` - Если игрок является самим HLTV

**Пример:**

```lua
print("Игроки на сервере:")
for i = 1, maxclients() do
    local ply = GetPlayerInfo(i)
    if ply then
        print(ply.name)
    end
end
```

---

### `wincmd(command)`

Выполняет команду в консоль Windows, но не открывает консоль (альтернатива `os.execute`).

**Пример:**

```lua
wincmd("calc") -- Открытие калькулятора.
```

---
